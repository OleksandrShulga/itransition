Привіт всім, хто читає ці рядки! Це тестове завдання від компанії Itransition. ТЗ буде дещо нижче, зараз коротко про порядок розгортання проекту:
Вимоги:
- php 8.2
- mariaDB 10.x

1) Виконується команда composer install
2) Виконується команда php artisan key:generate
3) В env вказуються доступи до БД
4) Потрібно імпортувати файл БД в базу даних (він був виданий разом з ТЗ)
5) Вводиться php artisan migrate
6) Вводиться php artisan opotimize

Команда для запуску основного дійства: php artisan csv:import storage/app/stock.csv

Перевірка PHPUnit тесту: php artisan test --filter={Назва тесту}



Технічне завдання:

Проблема: Для того щоб додати нові та цікаві продукти на сайт, потрібно обробити CSV файл від постачальника. Цей файл містить інформацію про продукти, яку потрібно витягнути та вставити в таблицю бази даних. Крім того, потрібно застосувати кілька простих бізнес-правил до даних, які ми імпортуємо. Таблиця вже існує для отримання цієї інформації, але її потрібно дещо відредагувати для коректної роботи з цим файлом.

Рішення: Необхідно створити механізм, який зчитує CSV файл, парсить вміст і потім вставляє дані в таблицю MySQL. Процес імпорту буде виконуватися з командного рядка, і після завершення необхідно буде вивести звіт про кількість оброблених елементів, скільки з них було успішно оброблено і скільки було пропущено. Дивіться правила імпорту нижче.

Цілі: Ваше рішення має бути об'єктно-орієнтованим, слідуючи принципам SOLID, на основі будь-якого PHP фреймворку (Symfony, Laravel тощо) і використовувати MySQL. Код має бути чітко структурований, добре коментований і покритий юніт-тестами. Будь-які SQL, використані для зміни таблиці, повинні бути включені як скрипти міграції в поданні.

За допомогою аргументів командного рядка скрипт можна запустити в режимі «test». Це виконає всі операції звичайного імпорту, але не вставить дані в базу даних.

Постачальник надає рівень запасів і ціну, які ми зараз не зберігаємо. Використовуючи відповідні типи даних, додайте два стовпці до таблиці для збереження цієї інформації.

Результат повинен бути представлений у вигляді pull request, який містить тільки код, пов'язаний із проблемою (за винятком початкового коміту проекту фреймворку).

Правила імпорту:

    Будь-який товар, який коштує менше ніж $5 і має менше ніж 10 одиниць на складі, не буде імпортований.
    Товари, які коштують понад $1000, не будуть імпортовані.
    Товари, позначені як «зняті з виробництва», будуть імпортовані, але дата зняття буде встановлена як поточна.
    Товари, які не були правильно вставлені, повинні бути внесені до звіту в кінці процесу імпорту.

Поради: Шукайте існуючі рішення/бібліотеки, які можуть допомогти організувати код імпорту та всі правила в гарну об'єктно-орієнтовану програму.

Додаткові роздуми: Оскільки дані надаються зовнішнім джерелом, вони можуть містити певні проблеми:

    Чи правильно відформатовані дані для CSV.
    Чи правильно відформатовані дані для використання з базою даних.
    Можливі проблеми з кодуванням даних або проблеми з кінцівками рядків.
    Можлива ручна зміна файлу, що може зробити деякі записи недійсними.

Вам слід або вирішити ці проблеми в коді, або вказати в своєму відгуку, як би ви їх вирішили, якби у вас було більше часу для розробки скрипту.
